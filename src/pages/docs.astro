---
import Masonry from 'svelte-bricks/Masonry.svelte';
import FAQItem from '../components/FAQItem.astro';
import FAQSection from '../components/FAQSection.astro';
import Welcome from '../components/Welcome.astro';
import Layout from '../layouts/Layout.astro';
import APIDocs from '../components/APIDocs.svelte';

import "../styles/global.css";
import { getFromId, getPage, totalPages } from '../lib/paywalls';

---

<Layout title="API Docs - The Paywall Museum">
	<section class="container mx-auto pb-6 px-6">
		<h1>
			<i class="text-orange-600">the</i> 
			"API" Docs
		</h1>
		<div class="flex flex-col gap-4">
			<div class="api-entry">
				<h2>GET <code>/api/paywall/</code></h2>
				<p>
					Get basic paywall information, such as the total number of pages.
				</p>
				<p>Example output:</p>
				<pre><code>{
					JSON.stringify({totalPages}, null, 4)	
				}</code></pre>
			</div>
			<div class="api-entry">
				<h2>GET <code>/api/paywall/page/:page</code></h2>
				<p>
					Get a specific page of paywall series (zero-indexed).<br/>
					Replace <code>:page</code> with a whole number from 0 to the value of <code>totalPages</code> returned by /api/paywall/ (exclusive).
				</p>
				<p>Example output (with <code>:page = 0</code>):</p>
				<pre><code>{
					JSON.stringify(getPage(0).slice(0, 2), null, 4)	
				}</code></pre>
			</div>
			<div class="api-entry">
				<h2>GET <code>/api/paywall/id/:id</code></h2>.
				<p>
					Get a specific paywall series from an ID.<br/>
					Replace <code>:id</code> with the ID of a paywall series.
				</p>
				<p>Example output (with <code>:id = view-browsing-history</code>):</p>
				<pre><code>{
					JSON.stringify(getFromId("view-browsing-history"), null, 4)	
				}</code></pre>
			</div>
		</div>
	</section>
</Layout>

<style>
	@reference "tailwindcss";

	h1 {
		@apply text-3xl md:text-4xl lg:text-5xl font-bold my-8;
	}

	h2 {
		@apply text-2xl md:text-3xl font-bold;
	}

	p + p {
		@apply mt-4;
	}

	.api-entry {
		@apply rounded-sm p-4 border-amber-950 border-1;
	}
	.api-entry pre {
		@apply rounded-sm p-2 border-gray-800 bg-gray-900 border-1 overflow-x-auto mt-2;
	}
</style>